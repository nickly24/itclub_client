{"ast":null,"code":"var _jsxFileName = \"/Users/nickly/Desktop/itclub_client/src/dnevnik/Modules/FilialCard.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport AttendanceCard from './AttendanceCard';\nimport { FaPlus } from 'react-icons/fa';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FilialCard = ({\n  filial,\n  attendance,\n  addAttendance,\n  editAttendance,\n  deleteAttendance,\n  prepods\n}) => {\n  _s();\n  const [isAdding, setIsAdding] = useState(false);\n  const [newAttendance, setNewAttendance] = useState({\n    date: '',\n    number_of_children: '',\n    prepod_id: ''\n  });\n  const totalSum = attendance.reduce((sum, record) => sum + record.number_of_children * record.price_per_session, 0);\n  const handleAddClick = () => {\n    setIsAdding(true);\n  };\n  const handleAddSubmit = () => {\n    if (!newAttendance.date || !newAttendance.number_of_children || !newAttendance.prepod_id) {\n      alert('Пожалуйста, заполните все поля.');\n      return;\n    }\n    addAttendance(filial.id, newAttendance, filial.price).then(() => {\n      setIsAdding(false);\n      setNewAttendance({\n        date: '',\n        number_of_children: '',\n        prepod_id: ''\n      });\n    }).catch(error => {\n      console.error('Ошибка при добавлении записи о посещаемости:', error);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dnevnik-filial-card\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: filial.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"attendance-cards\",\n        children: [attendance.map(record => /*#__PURE__*/_jsxDEV(AttendanceCard, {\n          record: record,\n          filialId: filial.id,\n          editAttendance: editAttendance,\n          deleteAttendance: deleteAttendance,\n          prepods: prepods,\n          pricePerSession: filial.price // Передаем стоимость занятия\n        }, record.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 13\n        }, this)), isAdding ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"add-form\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"add_dnevnik_input\",\n            type: \"date\",\n            value: newAttendance.date,\n            onChange: e => setNewAttendance({\n              ...newAttendance,\n              date: e.target.value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"add_dnevnik_input\",\n            type: \"number\",\n            placeholder: \"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u0434\\u0435\\u0442\\u0435\\u0439\",\n            value: newAttendance.number_of_children,\n            onChange: e => setNewAttendance({\n              ...newAttendance,\n              number_of_children: e.target.value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"add_dnevnik_input\",\n            value: newAttendance.prepod_id,\n            onChange: e => setNewAttendance({\n              ...newAttendance,\n              prepod_id: e.target.value\n            }),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u043F\\u0440\\u0435\\u043F\\u043E\\u0434\\u0430\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 17\n            }, this), prepods.map(prepod => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: prepod.id,\n              children: prepod.name\n            }, prepod.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 19\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"table_btn_update\",\n            onClick: handleAddSubmit,\n            children: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"table_btn_back\",\n            onClick: () => setIsAdding(false),\n            children: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleAddClick,\n          className: \"add-button add_attendance\",\n          children: [/*#__PURE__*/_jsxDEV(FaPlus, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 15\n          }, this), \" \\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043F\\u043E\\u0441\\u0435\\u0449\\u0435\\u043D\\u0438\\u0435\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"total-sum\",\n      children: [\"\\u0421\\u0443\\u043C\\u043C\\u0430: \", totalSum, \" \\u0440\\u0443\\u0431.\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 5\n  }, this);\n};\n_s(FilialCard, \"b4rBpsLCWrwOhwr7LMQ+bkIsav8=\");\n_c = FilialCard;\nexport default FilialCard;\nvar _c;\n$RefreshReg$(_c, \"FilialCard\");","map":{"version":3,"names":["React","useState","AttendanceCard","FaPlus","jsxDEV","_jsxDEV","FilialCard","filial","attendance","addAttendance","editAttendance","deleteAttendance","prepods","_s","isAdding","setIsAdding","newAttendance","setNewAttendance","date","number_of_children","prepod_id","totalSum","reduce","sum","record","price_per_session","handleAddClick","handleAddSubmit","alert","id","price","then","catch","error","console","className","children","name","fileName","_jsxFileName","lineNumber","columnNumber","map","filialId","pricePerSession","type","value","onChange","e","target","placeholder","prepod","onClick","_c","$RefreshReg$"],"sources":["/Users/nickly/Desktop/itclub_client/src/dnevnik/Modules/FilialCard.js"],"sourcesContent":["import React, { useState } from 'react';\nimport AttendanceCard from './AttendanceCard';\nimport { FaPlus } from 'react-icons/fa';\n\nconst FilialCard = ({ filial, attendance, addAttendance, editAttendance, deleteAttendance, prepods }) => {\n  const [isAdding, setIsAdding] = useState(false);\n  const [newAttendance, setNewAttendance] = useState({\n    date: '',\n    number_of_children: '',\n    prepod_id: ''\n  });\n\n  const totalSum = attendance.reduce((sum, record) => sum + record.number_of_children * record.price_per_session, 0);\n\n  const handleAddClick = () => {\n    setIsAdding(true);\n  };\n\n  const handleAddSubmit = () => {\n    if (!newAttendance.date || !newAttendance.number_of_children || !newAttendance.prepod_id) {\n      alert('Пожалуйста, заполните все поля.');\n      return;\n    }\n    \n    addAttendance(filial.id, newAttendance, filial.price)\n      .then(() => {\n        setIsAdding(false);\n        setNewAttendance({ date: '', number_of_children: '', prepod_id: '' });\n      })\n      .catch(error => {\n        console.error('Ошибка при добавлении записи о посещаемости:', error);\n      });\n  };\n\n  return (\n    <div className=\"dnevnik-filial-card\">\n      <h3>{filial.name}</h3>\n      <div>\n        <div className=\"attendance-cards\">\n          {attendance.map(record => (\n            <AttendanceCard\n              key={record.id}\n              record={record}\n              filialId={filial.id}\n              editAttendance={editAttendance}\n              deleteAttendance={deleteAttendance}\n              prepods={prepods}\n              pricePerSession={filial.price} // Передаем стоимость занятия\n            />\n          ))}\n          {isAdding ? (\n            <div className=\"add-form\">\n              <input className='add_dnevnik_input'\n                type=\"date\"\n                value={newAttendance.date}\n                onChange={(e) => setNewAttendance({ ...newAttendance, date: e.target.value })}\n              />\n              <input className='add_dnevnik_input'\n                type=\"number\"\n                placeholder=\"Количество детей\"\n                value={newAttendance.number_of_children}\n                onChange={(e) => setNewAttendance({ ...newAttendance, number_of_children: e.target.value })}\n              />\n              <select className='add_dnevnik_input'\n                value={newAttendance.prepod_id}\n                onChange={(e) => setNewAttendance({ ...newAttendance, prepod_id: e.target.value })}\n              >\n                <option value=\"\">Выберите преподавателя</option>\n                {prepods.map(prepod => (\n                  <option key={prepod.id} value={prepod.id}>{prepod.name}</option>\n                ))}\n              </select>\n              <button className='table_btn_update' onClick={handleAddSubmit}>Добавить</button>\n              <button className='table_btn_back' onClick={() => setIsAdding(false)}>Отмена</button>\n            </div>\n          ) : (\n            <button onClick={handleAddClick} className=\"add-button add_attendance\">\n              <FaPlus /> Добавить посещение\n            </button>\n          )}\n        </div>\n      </div>\n      <div className=\"total-sum\">Сумма: {totalSum} руб.</div>\n    </div>\n  );\n};\n\nexport default FilialCard;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,OAAOC,cAAc,MAAM,kBAAkB;AAC7C,SAASC,MAAM,QAAQ,gBAAgB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAExC,MAAMC,UAAU,GAAGA,CAAC;EAAEC,MAAM;EAAEC,UAAU;EAAEC,aAAa;EAAEC,cAAc;EAAEC,gBAAgB;EAAEC;AAAQ,CAAC,KAAK;EAAAC,EAAA;EACvG,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGd,QAAQ,CAAC,KAAK,CAAC;EAC/C,MAAM,CAACe,aAAa,EAAEC,gBAAgB,CAAC,GAAGhB,QAAQ,CAAC;IACjDiB,IAAI,EAAE,EAAE;IACRC,kBAAkB,EAAE,EAAE;IACtBC,SAAS,EAAE;EACb,CAAC,CAAC;EAEF,MAAMC,QAAQ,GAAGb,UAAU,CAACc,MAAM,CAAC,CAACC,GAAG,EAAEC,MAAM,KAAKD,GAAG,GAAGC,MAAM,CAACL,kBAAkB,GAAGK,MAAM,CAACC,iBAAiB,EAAE,CAAC,CAAC;EAElH,MAAMC,cAAc,GAAGA,CAAA,KAAM;IAC3BX,WAAW,CAAC,IAAI,CAAC;EACnB,CAAC;EAED,MAAMY,eAAe,GAAGA,CAAA,KAAM;IAC5B,IAAI,CAACX,aAAa,CAACE,IAAI,IAAI,CAACF,aAAa,CAACG,kBAAkB,IAAI,CAACH,aAAa,CAACI,SAAS,EAAE;MACxFQ,KAAK,CAAC,iCAAiC,CAAC;MACxC;IACF;IAEAnB,aAAa,CAACF,MAAM,CAACsB,EAAE,EAAEb,aAAa,EAAET,MAAM,CAACuB,KAAK,CAAC,CAClDC,IAAI,CAAC,MAAM;MACVhB,WAAW,CAAC,KAAK,CAAC;MAClBE,gBAAgB,CAAC;QAAEC,IAAI,EAAE,EAAE;QAAEC,kBAAkB,EAAE,EAAE;QAAEC,SAAS,EAAE;MAAG,CAAC,CAAC;IACvE,CAAC,CAAC,CACDY,KAAK,CAACC,KAAK,IAAI;MACdC,OAAO,CAACD,KAAK,CAAC,8CAA8C,EAAEA,KAAK,CAAC;IACtE,CAAC,CAAC;EACN,CAAC;EAED,oBACE5B,OAAA;IAAK8B,SAAS,EAAC,qBAAqB;IAAAC,QAAA,gBAClC/B,OAAA;MAAA+B,QAAA,EAAK7B,MAAM,CAAC8B;IAAI;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,eACtBpC,OAAA;MAAA+B,QAAA,eACE/B,OAAA;QAAK8B,SAAS,EAAC,kBAAkB;QAAAC,QAAA,GAC9B5B,UAAU,CAACkC,GAAG,CAAClB,MAAM,iBACpBnB,OAAA,CAACH,cAAc;UAEbsB,MAAM,EAAEA,MAAO;UACfmB,QAAQ,EAAEpC,MAAM,CAACsB,EAAG;UACpBnB,cAAc,EAAEA,cAAe;UAC/BC,gBAAgB,EAAEA,gBAAiB;UACnCC,OAAO,EAAEA,OAAQ;UACjBgC,eAAe,EAAErC,MAAM,CAACuB,KAAM,CAAC;QAAA,GAN1BN,MAAM,CAACK,EAAE;UAAAS,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAOf,CACF,CAAC,EACD3B,QAAQ,gBACPT,OAAA;UAAK8B,SAAS,EAAC,UAAU;UAAAC,QAAA,gBACvB/B,OAAA;YAAO8B,SAAS,EAAC,mBAAmB;YAClCU,IAAI,EAAC,MAAM;YACXC,KAAK,EAAE9B,aAAa,CAACE,IAAK;YAC1B6B,QAAQ,EAAGC,CAAC,IAAK/B,gBAAgB,CAAC;cAAE,GAAGD,aAAa;cAAEE,IAAI,EAAE8B,CAAC,CAACC,MAAM,CAACH;YAAM,CAAC;UAAE;YAAAR,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC/E,CAAC,eACFpC,OAAA;YAAO8B,SAAS,EAAC,mBAAmB;YAClCU,IAAI,EAAC,QAAQ;YACbK,WAAW,EAAC,6FAAkB;YAC9BJ,KAAK,EAAE9B,aAAa,CAACG,kBAAmB;YACxC4B,QAAQ,EAAGC,CAAC,IAAK/B,gBAAgB,CAAC;cAAE,GAAGD,aAAa;cAAEG,kBAAkB,EAAE6B,CAAC,CAACC,MAAM,CAACH;YAAM,CAAC;UAAE;YAAAR,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC7F,CAAC,eACFpC,OAAA;YAAQ8B,SAAS,EAAC,mBAAmB;YACnCW,KAAK,EAAE9B,aAAa,CAACI,SAAU;YAC/B2B,QAAQ,EAAGC,CAAC,IAAK/B,gBAAgB,CAAC;cAAE,GAAGD,aAAa;cAAEI,SAAS,EAAE4B,CAAC,CAACC,MAAM,CAACH;YAAM,CAAC,CAAE;YAAAV,QAAA,gBAEnF/B,OAAA;cAAQyC,KAAK,EAAC,EAAE;cAAAV,QAAA,EAAC;YAAsB;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,EAC/C7B,OAAO,CAAC8B,GAAG,CAACS,MAAM,iBACjB9C,OAAA;cAAwByC,KAAK,EAAEK,MAAM,CAACtB,EAAG;cAAAO,QAAA,EAAEe,MAAM,CAACd;YAAI,GAAzCc,MAAM,CAACtB,EAAE;cAAAS,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAyC,CAChE,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACI,CAAC,eACTpC,OAAA;YAAQ8B,SAAS,EAAC,kBAAkB;YAACiB,OAAO,EAAEzB,eAAgB;YAAAS,QAAA,EAAC;UAAQ;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eAChFpC,OAAA;YAAQ8B,SAAS,EAAC,gBAAgB;YAACiB,OAAO,EAAEA,CAAA,KAAMrC,WAAW,CAAC,KAAK,CAAE;YAAAqB,QAAA,EAAC;UAAM;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAClF,CAAC,gBAENpC,OAAA;UAAQ+C,OAAO,EAAE1B,cAAe;UAACS,SAAS,EAAC,2BAA2B;UAAAC,QAAA,gBACpE/B,OAAA,CAACF,MAAM;YAAAmC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,4GACZ;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CACT;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,eACNpC,OAAA;MAAK8B,SAAS,EAAC,WAAW;MAAAC,QAAA,GAAC,kCAAO,EAACf,QAAQ,EAAC,sBAAK;IAAA;MAAAiB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACpD,CAAC;AAEV,CAAC;AAAC5B,EAAA,CAjFIP,UAAU;AAAA+C,EAAA,GAAV/C,UAAU;AAmFhB,eAAeA,UAAU;AAAC,IAAA+C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}